@page "/categoriaAtendimento"

<MudCard Elevation="25">
    <MudCardHeader>
        <CardHeaderAvatar>
            <MudIcon Icon="@Icons.Material.Filled.Category" />
        </CardHeaderAvatar>
        <CardHeaderContent>
            <MudText Typo="Typo.body1">Categorias de Fornecimento</MudText>            
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent>
        <MudTable Items="@CategoriaAtendimentos" Elevation="25" Dense="true" Hover="true" Breakpoint="Breakpoint.Sm" Loading="@_loading" LoadingProgressColor="Color.Dark"
                  Filter="new Func<CategoriaAtendimentoResponse,bool>(FilterCategoriaAtendimentoAsync)">
            <ToolBarContent>
                <MudFab Class="mr-4" Color="Color.Default" StartIcon="@Icons.Material.Filled.Add" Size="Size.Small" OnClick="(() => CreateCategoriaAtendimentoAsync())" />
                <MudFab Class="mr-4" Color="Color.Default" StartIcon="@Icons.Material.Filled.Refresh" Size="Size.Small" OnClick="(() => LoadCategoriaAtendimentoListAsync())" />
                <MudSpacer />
                <MudSpacer />
                <MudSpacer />
                <MudSpacer />
                <MudTextField @bind-Value="searchCategoriaAtendimento" Placeholder="Pesquisar" Adornment="Adornment.Start" Class="mt-0">
                </MudTextField>
                <MudFab Color="Color.Default" StartIcon="@Icons.Material.Filled.Search" Size="Size.Small" Class="ml-4"
                        OnClick="(() => FilterCategoriaAtendimentoAsync(CategoriaAtendimentos.FirstOrDefault()))" />
            </ToolBarContent>
            <HeaderContent>
                <MudTh>Id</MudTh>
                <MudTh>Valor</MudTh>                
                <MudTh>Cat. Pai</MudTh>
                <MudTh>Nível</MudTh>
                <MudTh>Ativo</MudTh>
                <MudTh>Data de Criação</MudTh>
                <MudTh>Últ. Alteração</MudTh>
                <MudTh>Ações</MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd DataLabel="Id">@context.Id</MudTd>
                <MudTd DataLabel="Cat_valor">@context.Cat_valor</MudTd>
                <MudTd DataLabel="Cat_despai">@context.Cat_despai</MudTd>
                <MudTd DataLabel="Cat_nivel">@context.Cat_nivel</MudTd>
                <MudTd DataLabel="Cat_ativo">@context.Cat_ativo</MudTd>
                <MudTd DataLabel="Cat_datcri">@context.Cat_datcri</MudTd>
                <MudTd DataLabel="Cat_datalt">@context.Cat_datalt</MudTd>
                <MudTd DataLabel="Ações">
                    <MudMenu Icon="@Icons.Material.Filled.MoreVert" AriaLabel="Open user menu">
                        <MudMenuItem OnClick="(() => UpdateCategoriaAtendimentoAsync(context.Id))">Editar</MudMenuItem>
                        <MudMenuItem OnClick="(() => DeleteCategoriaAtendimentoAsync(context.Id, context.Cat_valor))">Deletar</MudMenuItem>
                    </MudMenu>
                </MudTd>
            </RowTemplate>
        </MudTable>
    </MudCardContent>
</MudCard>

